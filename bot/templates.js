/**
 * Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾ÑÑ‚ Ğ¾ Ñ‚ÑƒÑ€Ğµ Ğ´Ğ»Ñ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ Ğ² ĞºĞ°Ğ½Ğ°Ğ»
 * @param {Object} tour - ĞĞ±ÑŠĞµĞºÑ‚ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¾ Ñ‚ÑƒÑ€Ğµ
 * @returns {String} - ĞÑ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
 */
const formatTourPost = (tour) => {
  // Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ†ĞµĞ½Ñ‹
  const price = tour.currentPrice ? new Intl.NumberFormat('ru-RU').format(tour.currentPrice) : 'ĞŸĞ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ';
  
  // Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº (Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ°, ĞºĞ¾Ñ‚Ğ¾Ñ€ÑƒÑ Ğ²Ñ‹ Ğ¼Ğ¾Ğ¶ĞµÑ‚Ğµ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ·Ğ¶Ğµ)
  const title = tour.title || 'ğŸ”¥ Ğ“Ğ¾Ñ€ÑÑ‰Ğ¸Ğ¹ Ñ‚ÑƒÑ€ Ğ² Ğ¢ÑƒÑ€Ñ†Ğ¸Ñ!';
  
  // Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ (Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ°, ĞµÑĞ»Ğ¸ ĞµĞ³Ğ¾ Ğ½ĞµÑ‚ Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
  const rating = tour.rating ? `ğŸ’¯ Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³: ${tour.rating}/10\n` : '';
  
  // Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ğ¿ĞµÑ€ĞµĞ»ĞµÑ‚Ğµ (Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ°, ĞµÑĞ»Ğ¸ Ğ½ĞµÑ‚ Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
  const fromCity = tour.fromCity || 'ĞÑÑ‚Ğ°Ğ½Ñ‹';
  
  // Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¿Ğ¾ÑÑ‚Ğ°
  let postText = `ğŸ”¥ ${title}\n\n` +
         `ğŸ¨ *${tour.name}*\n` +
         `ğŸ“ ${tour.location}\n\n` +
         `${tour.description}\n\n` +
         `${rating}` +
         `ğŸ“† ${tour.date}\n` +
         `ğŸŒ” ${tour.nights} Ğ½Ğ¾Ñ‡ĞµĞ¹\n`;
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ, ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¾ ĞµÑÑ‚ÑŒ
  if (tour.meal) {
    postText += `ğŸ½ ${tour.meal}\n`;
  }
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ³Ğ¾ÑÑ‚ÑÑ… Ğ¸ Ğ¿ĞµÑ€ĞµĞ»ĞµÑ‚Ğµ
  postText += `âœˆï¸ Ğ¸Ğ· ${fromCity} - ${price} â‚½ Ğ½Ğ° ${tour.guests || '2-Ñ…'}\n\n`;
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ñ… ÑƒÑĞ»ÑƒĞ³Ğ°Ñ…
  postText += `âœ… Ğ’ Ñ†ĞµĞ½Ñƒ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¾:\n` +
         `- ĞŸĞµÑ€ĞµĞ»ĞµÑ‚\n` +
         `- ĞŸÑ€Ğ¾Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ğ¾Ñ‚ĞµĞ»Ğµ ${tour.stars ? tour.stars + '*' : ''}â­ï¸\n` +
         `- ĞŸĞ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ ${tour.meal || 'Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğµ'}\n` +
         `- Ğ¢Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€ Ğ°ÑÑ€Ğ¾Ğ¿Ğ¾Ñ€Ñ‚-Ğ¾Ñ‚ĞµĞ»ÑŒ-Ğ°ÑÑ€Ğ¾Ğ¿Ğ¾Ñ€Ñ‚\n` +
         `- ĞœĞµĞ´Ğ¸Ñ†Ğ¸Ğ½ÑĞºĞ°Ñ ÑÑ‚Ñ€Ğ°Ñ…Ğ¾Ğ²ĞºĞ°\n` +
         `- Ğ¢ÑƒÑ€ĞºĞ¾Ğ´\n\n`;
  
  // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ğ½ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
  postText += `ğŸ“² ĞĞ°ÑˆĞ¸ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹:\n` +
         `âœ”ï¸ [whatsApp](https://wa.me/77078863633)\n` +
         `âœ”ï¸ +7 (707) 886 36 33\n` +
         `ğŸ‘‰ [Ğ¢ÑƒÑ€Ñ‹ Ğ² Ğ¢ÑƒÑ€Ñ†Ğ¸Ñ Ğ¸Ğ· ${fromCity}](https://tmtl.kz)\n\n` +
         `â—ï¸ Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ° Ğ½Ğ° Ğ´ĞµĞ½ÑŒ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸\n` +
         `ğŸ–Œ ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°Ğ¹Ñ‚ĞµÑÑŒ Ğ½Ğ° Ğ½Ğ°Ñˆ [Ğ˜Ğ½ÑÑ‚Ğ°Ğ³Ñ€Ğ°Ğ¼](https://www.instagram.com/_timetotravel_krg)`;
  
  return postText;
};

/**
 * Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ° Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ¾Ñ‚ĞµĞ»Ñ
 * @param {String} url - Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ¾Ñ‚ĞµĞ»Ñ
 * @returns {Object} - ĞĞ±ÑŠĞµĞºÑ‚ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ´Ğ»Ñ Telegram
 */
const createHotelKeyboard = (url) => {
  return {
    inline_keyboard: [
      [
        {
          text: 'ğŸ‘‰ ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ Ğ¾Ğ± Ğ¾Ñ‚ĞµĞ»Ğµ',
          url: url
        }
      ],
      [
        {
          text: 'ğŸŒ ĞĞ°Ñˆ ÑĞ°Ğ¹Ñ‚',
          url: 'https://tmtl.kz'
        }
      ]
    ]
  };
};

module.exports = {
  formatTourPost,
  createHotelKeyboard
};